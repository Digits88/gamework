TODO: Change the way the layer manager works
TODO: Make all singletons completely independant. I want this to be a nice framework